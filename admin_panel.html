<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Firestar Gaming</title>
    <script type="module" src="adminApi.js"></script>

    <link rel="stylesheet" href="admin_panel.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo">
            <span>Firestar Gaming Admin</span>
        </div>
        <nav>
            <a href="index.html">View Website</a>
            <a href="logout.html">Logout</a>
        </nav>
    </header>

    <aside class="sidebar">
        <ul>
            <li><a href="#dashboard">Dashboard</a></li>
            <li><a href="#content-management">Content Management</a></li>
            <li><a href="#analytics">Analytics</a></li>
            <li><a href="#comments-moderation">Comments Moderation</a></li>
        </ul>
    </aside>

    <main>
        <section id="dashboard">
            <h1>Dashboard</h1>
            <p>Welcome, Admin! Here's a summary of the website activity.</p>
        </section>

        <section id="content-management">
            <h2>Content Management</h2>
            <button id="show-add-post-form">Add New Post</button>
            
            <form id="add-post-form" style="display: none;">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" required>
                
                <label for="summary">Summary:</label>
                <textarea id="summary" name="summary" required></textarea>
                
                <label for="content">Content:</label>
                <textarea id="content" name="content" rows="10" required></textarea>
                
                <label for="category">Category:</label>
                <select id="category" name="category" required>
                    <option value="Video Games">Video Games</option>
                    <option value="Game Development">Game Development</option>
                    <option value="New Tech">New Tech</option>
                </select>
                
                <button type="submit">Submit Post</button>
            </form>
            
            <div class="posts">
                <!-- List of posts fetched from the backend -->
            </div>
            <section id="admin-posts">
                <h2>Manage Posts</h2>
                <div id="posts-container"></div>
            </section>
            
        </section>
        

        <section id="analytics">
            <h2>Analytics</h2>
            <p>Website stats will be displayed here.</p>
        </section>

        <section id="comments-moderation">
            <h2>Comments Moderation</h2>
            <div class="comments">
                <!-- List of comments fetched from the backend -->
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Firestar Gaming. Admin Panel.</p>
    </footer>

       <!-- Add JavaScript here -->
    <script type="module">
        import { addPost } from './adminApi.js';
    
        // Toggle visibility of the Add Post form
        document.getElementById('show-add-post-form').addEventListener('click', () => {
            const form = document.getElementById('add-post-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        });
    
        // Handle Add Post form submission
        document.getElementById('add-post-form').addEventListener('submit', async (e) => {
            e.preventDefault();
    
            const title = document.getElementById('title').value;
            const summary = document.getElementById('summary').value;
            const content = document.getElementById('content').value;
            const category = document.getElementById('category').value;
    
            try {
                const result = await addPost({ title, summary, content, category });
                if (result) {
                    alert('Post added successfully!');
                    document.getElementById('add-post-form').reset();
                    document.getElementById('add-post-form').style.display = 'none';
                    // Optionally refresh posts list here
                }
            } catch (error) {
                alert('Failed to add post: ' + error.message);
            }
        });
    </script>
    
</body>
</html>
